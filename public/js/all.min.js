function uppodEvent(e,t){switch(t){case"init":break;case"start":break;case"play":break;case"pause":break;case"stop":break;case"seek":break;case"loaded":break;case"end":break;case"download":break;case"quality":break;case"error":break;case"ad_end":break;case"pl":break}}function uppodSend(e,t,n){document.getElementById(e).sendToUppod(t)}function uppodGet(e,t,n){return document.getElementById(e).getUppod(t)}(function(e,t){function n(){throw new Error("Abstract function ")}function r(t,n){if(typeof t==="string"){t=e.document.getElementById(t);if(!t){throw new Error("Cant found player element with id "+t)}}this.getPlayer=function(){return t};n=n||{};n.files=n.files||[];this.options=n;var r=0,i=false;this.getCurrentFileIndex=function(){return r};this.setCurrentFileIndex=function(e){e=parseInt(e,10)||0;if(e<0||e>n.files.length){e=0}r=e;return this};this.getCurrentFile=function(){var e=this.options.files[this.getCurrentFileIndex()];if(!e){throw Error("File #"+this.getCurrentFileIndex()+" does not exists")}return e};this.inPlay=function(e){return arguments.length?i=!!e:i}}function i(t,n){this.parent.apply(this,arguments);var r=this;var i=this.getPlayer();e.jQuery(i).on("play",function(){r.onStartPlay()});e.jQuery(i).on("canplaythrough",function(){r.onPlay()})}function s(e,t){this.parent.apply(this,arguments)}r.prototype.getOptions=function(){return this.options};r.prototype.getOption=function(e){return this.options[e]};r.prototype.setOption=function(e,t){this.options[e]=t;return this};r.prototype.play=n;r.prototype.stop=n;r.prototype.pause=n;r.prototype.next=n;r.prototype.prev=n;r.prototype.getVolume=n;r.prototype.setVolume=n;r.prototype.toNext=function(){var e=this.getCurrentFileIndex()||0;e++;if(e==this.getOption("files").length){e=0}this.setCurrentFileIndex(e)};r.prototype.toPrev=function(){var e=this.getCurrentFileIndex()||0;e--;if(e<0){e=this.getOption("files").length-1}this.setCurrentFileIndex(e)};r.prototype.addFile=function(e){this.options.push(e);return this};i.prototype=new r;i.prototype.parent=r;i.prototype.constructor=i;i.isSupport=function(){if(e.Audio!==t){try{new e.Audio;return true}catch(n){}}return false};i.isSupportFormat=function(t){var n=false;if(i.isSupport()){t=t.toLowerCase();var r={ogg:"audio/ogg;",mp3:"audio/mpeg;"};var s=new e.Audio;n=r[t]&&!!s.canPlayType(r[t])}return n};i.prototype.play=function(){var e=this.getCurrentFile();this.getPlayer().setAttribute("src",e);this.getPlayer().play();this.inPlay(true)};i.prototype.stop=function(){this.getPlayer().pause();this.inPlay(false)};i.prototype.next=function(){this.toNext();this.inPlay()&&this.play();return this};i.prototype.prev=function(){this.toPrev();this.inPlay()&&this.play()};i.prototype.setVolume=function(e){if(e<0||e>100){return false}this.getPlayer().volume=e/100;return this};i.prototype.onStartPlay=function(){if(typeof this.options.onStartPlay=="function"){this.options.onStartPlay()}};i.prototype.onPlay=function(){if(typeof this.options.onPlay=="function"){this.options.onPlay()}};s.prototype=new r;s.prototype.parent=r;s.prototype.constructor=s;s.prototype.send=function(e){try{uppodSend(this.getPlayer().id,e)}catch(t){console.warn(t)}return this};s.prototype.play=function(){var e=this.getCurrentFile();this.send("file:"+e);this.inPlay(true)};s.prototype.stop=function(){this.send("stop");this.inPlay(false)};s.prototype.next=function(){this.toNext();this.inPlay()&&this.play();return this};s.prototype.prev=function(){this.toPrev();this.inPlay()&&this.play()};s.prototype.setVolume=function(e){if(e<0||e>100){return false}return this.send("v"+e)};s.createPlayerObject=function(e){function i(e){var t=document.createElement("div");t.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'></object>";return t.firstChild}function s(e){if(!e.movie)throw Error("options.movie does not exist");if(!e.id)throw Error("options.id does not exist")}function o(e){e=e||{};var t=[];var n;for(n in e){if(!e.hasOwnProperty(n))continue;t.push(n+"="+e[n])}return t.join("&")}e=e||{};e.width=e.width||1;e.height=e.height||1;e.arguments=e.arguments||{};s(e);var t=(document.documentElement.style.scrollbar3dLightColor != undefined),n=t?i(e.movie):document.createElement("object");if(!t){n.setAttribute("type","application/x-shockwave-flash");n.setAttribute("data",e.movie)}n.setAttribute("id",e.id);n.setAttribute("width",e.width);n.setAttribute("height",e.height);var r=document.createElement("param");r.setAttribute("name","flashvars");r.setAttribute("value",o(e.arguments));n.appendChild(r);document.body.appendChild(n);return n};e.BasePlayer=r;e.Html5Player=i;e.UppodPlayer=s})(window);(function(e,t){function n(e){var n="http://ws.audioscrobbler.com/2.0/";this.request=function(r,i,s){r=r||{};if(r.method===t){throw new Error("method is undefined")}r.api_key=r.api_key||e;r.format=r.format||"json";$.ajax({url:n,crossDomain:true,dataType:"jsonp",data:r,success:i,error:s})}}function r(e){var t=new n(e);this.getClient=function(){return t}}r.prototype.getRecentTracks=function(e,n,r){if(e.user===t){throw new Error("User is undefined")}e.method="user.getrecenttracks";e.limit=e.limit||1;this.getClient().request(e,n,r)};e.LastFm=r})(window);(function(e,t){function c(e){var t=parseInt(+e/1e3);var n=10*60;r.getRecentTracks({user:"radiorostova",from:t-n,to:t+n,limit:5},function(e){var n;try{n=e.recenttracks.track}catch(r){n=[]}h(n,t)},function(e,t){})}function h(e,t){e=e||[];var n=e.length;if(n<1){return d()}p();var r,i,s="",o=t,a=null,f,l;for(r=0;r<n;r++){i=e[r];var c=new Date;c.setSeconds(0);if(i.date){l=parseInt(i.date.uts,10);c.setTime(l*1e3);c.setSeconds(0)}else{continue}l=parseInt(c/1e3,10);f="";if(!a&&o>=l){f="target";a=true}var h='<li class="track '+f+'">'+'<img class="poster" src="'+i.image[0]["#text"]+'">'+'<div class="info">'+'<a class="name" target="_blank" href="'+i.url+'">'+i.name+"</a>"+'<a class="artist" target="_blank" href="'+i.url+'">'+i.artist["#text"]+"</a>"+'<div class="dt">'+'<span class="time">'+m(c)+'</span><br><span class="date"> '+g(c)+"</span>"+"</div>"+"</div>"+'<div class="clear"></div>'+"</li>";s=h+s}u.html(s).slideDown()}function p(e){if(e)u.hide();u.empty()}function d(){p();u.html("К сожалению ничего не найдено");u.slideDown()}function v(e,t){e=e||"today";if(!{today:1,yesterday:1,other:1}[e]){return false}var n=new Date;switch(e){case"yesterday":n.setDate(n.getDate()-1);case"today":l.date.attr("disabled",true);break;case"other":default:l.date.attr("disabled",null);l.date[0].focus();l.date[0].select()}var r=g(n);l.date.val(r);if(t){n.setMinutes(0);r=m(n);l.time.val(r)}}function m(e){return[String(e.getHours()).replace(/^(\d){1}$/,"0$1"),String(e.getMinutes()).replace(/^(\d){1}$/,"0$1")].join(":")}function g(e){return[String(e.getDate()).replace(/^(\d){1}$/,"0$1"),e.getMonth()+1,String(e.getFullYear()).replace(/^(\d){2}/,"")].join(".")}function y(){var e=(new Date).getTimezoneOffset()/60;var t=e<0?"+":"-";e=String(Math.abs(e));if(e.length<2)e="0"+e;return t+e+":00"}var n=e.jQuery;var r=new LastFm("c7cf555ada3061e1a0fe8b258185d6d9");var i=n("#track-searcher .tab-button.search:first");var s=n("#track-searcher .wrapper");var o=n(".form:first",s);var u=n("ul.list:first",s);i.click(function(){i.hide();s.slideDown()});var a=n("p.buttons a.day-button",o);a.click(function(){var e=n(this);a.removeClass("selected");e.addClass("selected");v(e.attr("data-day"));return false});var f=n("p.buttons a.close:first");f.click(function(){p(true);s.slideUp(function(){i.show()})});var l={date:n(".inputs input.date:first"),time:n(".inputs input.time:first"),search:n(".inputs input.submit:first")};v("today",true);l.search.click(function(){p(true);var e=l.date.val();e=e.split(".").reverse();if(e[0].length<4)e[0]="20"+e[0];e=e.join("-");var t=l.time.val();t=t.split(":").concat(["00"]).join(":");var n=new Date(e+"T"+t+y());if(!n)return false;c(n)})})(window);(function(e,t){function f(e){if(e.artist&&e.name){a.name.html(e.name);a.artist.html(e.artist);a.coverLinks.attr("href",e.url);a.coverImage.attr("src",e.image)}}function l(e){var t;try{t=e.image[2]["#text"]}catch(n){}t=t||"images/player/poster.jpg";return{name:e.name||null,artist:e.artist||null,url:e.url||null,image:t}}var n=null;var r=e.jQuery;var i=e.location;var s=i.protocol+"//"+i.host+":6789";var o=io.connect(s);o.on("trackUpdate",function(e){n=l(e);if(!n)return false;f(n)});var u=r("#rr-player .track");var a={name:r("span.name",u),artist:r("span.artist",u),coverLinks:r("#rr-player .track a.track-link, #cover-link"),coverImage:r("#cover-image")}})(window);(function(e,t){function o(){function o(e){var t=e("#rr-player .track-info");var n={};n.volume={progress:e(".volume .progress",t),slider:e(".volume .progress .slider",t),value:e(".volume .value",t)};n.buttons=e(".controls",t);n.play=e(".button.play",t);n.prev=e(".button.prev",t);n.next=e(".button.next",t);n.stop=e(".button.pause",t);n.stream=e(".stream-info .stream-index");n.url=e(".stream-info .url");return n}function u(e,t){if(e!=r||t){s.volume.slider.css("width",e+"%");s.volume.value.text(e+"%");i.setVolume(r);r=e;b(r)}}function a(){i.play();s.buttons.addClass("inplay")}function f(){i.prev();h(s.prev);p()}function l(){i.next();h(s.next);p()}function c(){i.stop();h(s.stop);s.buttons.removeClass("inplay")}function h(t){t.addClass("vc-control-active");e.setTimeout(function(){t.removeClass("vc-control-active")},200)}function p(){s.stream.text("#"+(i.getCurrentFileIndex()+1));s.url.attr("href",i.getCurrentFile()+".m3u").text(i.getCurrentFile())}function d(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):t}function v(t,n,r){r=r||{};var i=r.expires;if(typeof i=="number"&&i){var s=new Date;s.setTime(s.getTime()+i*1e3);i=r.expires=s}if(i&&i.toUTCString){r.expires=i.toUTCString()}n=encodeURIComponent(n);var o=t+"="+n;for(var u in r){o+="; "+u;var a=r[u];if(a!==true){o+="="+a}}e.document.cookie=o}function m(){var e=parseInt(d("playerVolume"));if(isNaN(e)||e<0||e>100)e=50;return e}function b(t){if(g){e.clearTimeout(g);g=null}g=e.setTimeout(function(){v("playerVolume",t,{expires:(new Date).setFullYear(y.getFullYear()+1)})},25)}var r=m();var s=o(e.$);s.play.click(a);s.prev.mousedown(f);s.next.mousedown(l);s.stop.mousedown(c);s.volume.progress.on("mousemove mousedown",function(e){if(e.type=="mousedown"){this.mousedown=true}if(!this.mousedown){return false}var t=n(this);this.width=this.width||(this.width=t.innerWidth());var r=e.clientX-t.offset().left;var i=Math.round(r/this.width*100);u(i)});n(document).on("mouseup",function(){s.volume.progress[0].mousedown=false});u(r,true);var g;var y=new Date}function u(){var e=false;try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(n)e=true}catch(r){if(navigator.mimeTypes["application/x-shockwave-flash"]!=t)e=true}return!!e}var n=e.$;var r=["http://radio.romanziva.ru:8000/rostovradio","http://zavalinka.in:8000/rostovradio","http://178.76.238.182:8000/rostovradio","http://zavalinka.in:8000/rostovradiofm","http://178.76.238.182:8000/rostovradiofm","http://81.19.85.204:80/rostov.mp3"];var i;if(Html5Player.isSupportFormat("mp3")){i=new Html5Player(new Audio,{files:r,onStartPlay:function(){},onPlay:function(){}});o()}else if(u()){var s=UppodPlayer.createPlayerObject({movie:"swf/uppod-audio.swf",id:"player",arguments:{uid:"player",file:"http%3A%2F%2Fzavalinka.in%3A8000%2Frostovradio",st:"/swf/youtube.txt"}});s.style.visibility="hidden";i=new UppodPlayer(s,{files:r});e.uppodEvent=function(e,t){switch(t){case"init":o();break}}}else{n("#rr-player").addClass("no-flash")}})(window);$(function(){var e="http://radio.romanziva.ru/";VK.init({apiId:2859319,onlyWidgets:true});VK.Widgets.Like("vk_like",{type:"mini",height:18,pageUrl:e});VK.Widgets.Comments("vk_comments",{limit:10,width:"500",attach:"*",pageUrl:e})});