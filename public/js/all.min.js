(function(d,f){function a(){throw new Error("Abstract function ");}function c(i,h){if(typeof i==="string"){i=d.document.getElementById(i);if(!i){throw new Error("Cant found player element with id "+i);}}this.getPlayer=function(){return i;};h=h||{};h.files=h.files||[];this.options=h;var j=0,g=false;this.getCurrentFileIndex=function(){return j;};this.setCurrentFileIndex=function(k){k=parseInt(k,10)||0;if(k<0||k>h.files.length){k=0;}j=k;return this;};this.getCurrentFile=function(){var k=this.options.files[this.getCurrentFileIndex()];if(!k){throw Error("File #"+this.getCurrentFileIndex()+" does not exists");}return k;};this.inPlay=function(k){return arguments.length?(g=!!k):(g);};}c.prototype.getOptions=function(){return this.options;};c.prototype.getOption=function(g){return this.options[g];};c.prototype.setOption=function(g,h){this.options[g]=h;return this;};c.prototype.play=a;c.prototype.stop=a;c.prototype.pause=a;c.prototype.next=a;c.prototype.prev=a;c.prototype.getVolume=a;c.prototype.setVolume=a;c.prototype.toNext=function(){var g=this.getCurrentFileIndex()||0;g++;if(g===this.getOption("files").length){g=0;}this.setCurrentFileIndex(g);};c.prototype.toPrev=function(){var g=this.getCurrentFileIndex()||0;g--;if(g<0){g=this.getOption("files").length-1;}this.setCurrentFileIndex(g);};c.prototype.addFile=function(g){this.options.push(g);return this;};function e(i,h){this.parent.apply(this,arguments);var g=this;var j=this.getPlayer();d.jQuery(j).on("play",function(){g.onStartPlay();});d.jQuery(j).on("canplaythrough",function(){g.onPlay();});}e.prototype=new c();e.prototype.parent=c;e.prototype.constructor=e;e.isSupport=function(){if(d.Audio!==f){try{new d.Audio();return true;}catch(g){}}return false;};e.isSupportFormat=function(j){var h=false;if(e.isSupport()){j=j.toLowerCase();var g={ogg:"audio/ogg;",mp3:"audio/mpeg;"};var i=new d.Audio();h=(g[j]&&!!i.canPlayType(g[j]));}return h;};e.prototype.play=function(){var g=this.getCurrentFile();this.getPlayer().setAttribute("src",g);this.getPlayer().play();this.inPlay(true);};e.prototype.stop=function(){this.getPlayer().pause();this.inPlay(false);};e.prototype.next=function(){this.toNext();if(this.inPlay()){this.play();}return this;};e.prototype.prev=function(){this.toPrev();if(this.inPlay()){this.play();}};e.prototype.setVolume=function(g){if(g<0||g>100){return false;}this.getPlayer().volume=g/100;return this;};e.prototype.onStartPlay=function(){if(typeof this.options.onStartPlay==="function"){this.options.onStartPlay();}};e.prototype.onPlay=function(){if(typeof this.options.onPlay==="function"){this.options.onPlay();}};function b(h,g){this.parent.apply(this,arguments);}b.prototype=new c();b.prototype.parent=c;b.prototype.constructor=b;b.prototype.send=function(g){try{uppodSend(this.getPlayer().id,g);}catch(h){console.warn(h);}return this;};b.prototype.play=function(){var g=this.getCurrentFile();this.send("file:"+g);this.inPlay(true);};b.prototype.stop=function(){this.send("stop");this.inPlay(false);};b.prototype.next=function(){this.toNext();if(this.inPlay()){this.play();}return this;};b.prototype.prev=function(){this.toPrev();if(this.inPlay()){this.play();}};b.prototype.setVolume=function(g){if(g<0||g>100){return false;}return this.send("v"+g);};b.createPlayerObject=function(i){i=i||{};i.width=i.width||1;i.height=i.height||1;i["arguments"]=i["arguments"]||{};h(i);var g=("\v"=="v"),m=(g)?l(i.movie):document.createElement("object");if(!g){m.setAttribute("type","application/x-shockwave-flash");m.setAttribute("data",i.movie);}m.setAttribute("id",i.id);m.setAttribute("width",i.width);m.setAttribute("height",i.height);var j=document.createElement("param");j.setAttribute("name","flashvars");j.setAttribute("value",k(i["arguments"]));m.appendChild(j);document.body.appendChild(m);return m;function l(n){var o=document.createElement("div");o.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+n+"'></object>";return o.firstChild;}function h(n){if(!n.movie){throw Error("options.movie does not exist");}if(!n.id){throw Error("options.id does not exist");}}function k(p){p=p||{};var o=[];var n;for(n in p){if(p.hasOwnProperty(n)){o.push(n+"="+p[n]);}}return o.join("&");}};d.BasePlayer=c;d.Html5Player=e;d.UppodPlayer=b;})(window);function uppodEvent(a,b){switch(b){case"init":break;case"start":break;case"play":break;case"pause":break;case"stop":break;case"seek":break;case"loaded":break;case"end":break;case"download":break;case"quality":break;case"error":break;case"ad_end":break;case"pl":break;}}function uppodSend(b,a,c){document.getElementById(b).sendToUppod(a);}function uppodGet(b,a,c){return document.getElementById(b).getUppod(a);}(function(b,d){function c(f){var e="http://ws.audioscrobbler.com/2.0/";this.request=function(h,i,g){h=h||{};if(h.method===d){throw new Error("method is undefined");}h.api_key=h.api_key||f;h.format=h.format||"json";$.ajax({url:e,crossDomain:true,dataType:"jsonp",data:h,success:i,error:g});};}function a(f){var e=new c(f);this.getClient=function(){return e;};}a.prototype.getRecentTracks=function(f,g,e){if(f.user===d){throw new Error("User is undefined");}f.method="user.getrecenttracks";f.limit=f.limit||1;this.getClient().request(f,g,e);};b.LastFm=a;})(window);(function(i,f){var e=i.jQuery;var r=new LastFm("c7cf555ada3061e1a0fe8b258185d6d9");var s=e("#track-searcher .tab-button.search:first");var g=e("#track-searcher .wrapper");var b=e(".form:first",g);var l=e("ul.list:first",g);s.click(function(){s.hide();g.slideDown();});var p=e("p.buttons a.day-button",b);p.click(function(){var u=e(this);p.removeClass("selected");u.addClass("selected");j(u.attr("data-day"));return false;});var n=e("p.buttons a.close:first");n.click(function(){o(true);g.slideUp(function(){s.show();});});var c={date:e(".inputs input.date:first"),time:e(".inputs input.time:first"),search:e(".inputs input.submit:first")};j("today",true);c.search.click(function(){o(true);var u=trim(c.date.val());u=u.split(".").reverse();if(u[0].length<4){u[0]="20"+u[0];}u=u.join("-");var w=trim(c.time.val());w=w.split(":");if(!w.length){alert("Неверный формат времени. Введите в виде чч:мм");}w[0]=h(w[0],2);w=w.concat(["00"]).join(":");var v=new Date(u+"T"+w+a());if(isNaN(+v)){alert("Ошибочная дата. Повнимательнее.");return false;}d(v);});function d(u){var v=parseInt((+u)/1000,10);var w=10*60;r.getRecentTracks({user:"radiorostova",from:v-w,to:v+w,limit:5},function(y){var x;try{x=y.recenttracks.track;}catch(z){x=[];}m(x,v);},function(){});}function m(E,C){E=E||[];var A=E.length;if(A<1){return t();}o();var z,u,D="",y=C,B=null,F,x;for(z=0;z<A;z++){u=E[z];var v=new Date();v.setSeconds(0);if(u.date){x=parseInt(u.date.uts,10);v.setTime((x)*1000);v.setSeconds(0);}else{continue;}x=parseInt(v/1000,10);F="";if(!B&&y>=x){F="target";B=true;}var w='<li class="track '+F+'"><img class="poster" src="'+u.image[0]["#text"]+'"><div class="info"><a class="name" target="_blank" href="'+u.url+'">'+u.name+'</a><a class="artist" target="_blank" href="'+u.url+'">'+u.artist["#text"]+'</a><div class="dt"><span class="time">'+q(v)+'</span><br><span class="date"> '+k(v)+'</span></div></div><div class="clear"></div></li>';D=w+D;}l.html(D).slideDown();}function o(u){if(u){l.hide();}l.empty();}function t(){o();l.html("К сожалению ничего не найдено");l.slideDown();}function j(x,u){x=x||"today";if(!{today:1,yesterday:1,other:1}[x]){return false;}var v=new Date();var w=null;switch(x){case"yesterday":v.setDate(v.getDate()-1);w=true;break;case"today":w=true;break;default:c.date[0].focus();c.date[0].select();}c.date.attr("disabled",w);var y=k(v);c.date.val(y);if(u){v.setMinutes(0);y=q(v);c.time.val(y);}}function q(u){return[h(u.getHours(),2),h(u.getMinutes(),2)].join(":");}function k(u){return[h(u.getDate(),2),h(u.getMonth()+1,2),String(u.getFullYear()).replace(/^(\d){2}/,"")].join(".");}function a(){var v=new Date().getTimezoneOffset()/60;var u=(v<0)?"+":"-";v=String(Math.abs(v));if(v.length<2){v="0"+v;}return u+v+":00";}function h(w,v){v=Number(v);var u=String(w);if(v&&u.length<v){u=(new Array(v-u.length+1)).join("0")+w;}return u;}}(window));(function(d,g){var e,f,c;var b=Number(getCookie("search-helper"));if(!b){e=d.$;f=e("#hand-pointer");c=e("#track-searcher .tab-button.search:first");c.click(function(){if(!b){b=true;var h=new Date();h.setFullYear(h.getFullYear()+1);setCookie("search-helper",1,{expires:h});f.remove();}});f.show();a(false);}function a(h){if(b){return;}f.animate({left:(h?"+":"-")+"=20"},{duration:500,complete:function(){a(!h);}});}})(window);(function(h,c){var b=null;var f=h.jQuery;var d=h.location;var k=d.protocol+"//"+d.host+":6789";var j=io.connect(k);j.on("trackUpdate",function(l){b=g(l);if(!b){return false;}a(b);});var e=f("#rr-player .track");var i={name:f("span.name",e),artist:f("span.artist",e),coverLinks:f("#rr-player .track a.track-link, #cover-link"),coverImage:f("#cover-image")};function a(l){if(l.artist&&l.name){i.name.html(l.name);i.artist.html(l.artist);i.coverLinks.attr("href",l.url);i.coverImage.attr("src",l.image);}}function g(l){var n;try{n=l.image[2]["#text"];}catch(m){}n=n||"images/player/poster.jpg";return{name:l.name||null,artist:l.artist||null,url:l.url||null,image:n};}})(window);(function(c,f){var d=c.$;var h=["http://live.radiorostov.ru:8000/rostovradio","http://zavalinka.in:8000/rostovradio","http://178.76.238.182:8000/rostovradio","http://zavalinka.in:8000/rostovradiofm","http://178.76.238.182:8000/rostovradiofm","http://81.19.85.204:80/rostov.mp3"];var b;if(Html5Player.isSupportFormat("mp3")){b=new Html5Player((new Audio()),{files:h,onStartPlay:function(){},onPlay:function(){}});e();}else{if(a()){var g=UppodPlayer.createPlayerObject({movie:"swf/uppod-audio.swf",id:"player","arguments":{uid:"player",file:"http%3A%2F%2Fzavalinka.in%3A8000%2Frostovradio",st:"/swf/youtube.txt"}});g.style.visibility="hidden";b=new UppodPlayer(g,{files:h});c.uppodEvent=function(i,j){if(j==="init"){e();}};}else{d("#rr-player").addClass("no-flash");}}function e(){var n=q();var s=l(c.$);s.play.click(u);s.prev.mousedown(v);s.next.mousedown(j);s.stop.mousedown(o);s.volume.progress.on("mousemove mousedown",function(z){if(z.type==="mousedown"){this.mousedown=true;}if(!this.mousedown){return false;}var w=d(this);this.width=this.width||(this.width=w.innerWidth());var y=z.clientX-w.offset().left;var x=Math.round(y/this.width*100);r(x);});d(document).on("mouseup",function(){s.volume.progress[0].mousedown=false;});r(n,true);function l(y){var w=y("#rr-player .track-info");var x={};x.volume={progress:y(".volume .progress",w),slider:y(".volume .progress .slider",w),value:y(".volume .value",w)};x.buttons=y(".controls",w);x.play=y(".button.play",w);x.prev=y(".button.prev",w);x.next=y(".button.next",w);x.stop=y(".button.pause",w);x.stream=y(".stream-info .stream-index");x.url=y(".stream-info .url");return x;}function r(w,x){if(w!==n||x){s.volume.slider.css("width",w+"%");s.volume.value.text(w+"%");b.setVolume(n);n=w;m(n);}}function u(){b.play();s.buttons.addClass("inplay");}function v(){b.prev();t(s.prev);i();}function j(){b.next();t(s.next);i();}function o(){b.stop();t(s.stop);s.buttons.removeClass("inplay");}function t(w){w.addClass("vc-control-active");c.setTimeout(function(){w.removeClass("vc-control-active");},200);}function i(){s.stream.text("#"+(b.getCurrentFileIndex()+1));s.url.attr("href",b.getCurrentFile()+".m3u").text(b.getCurrentFile());}function q(){var w=parseInt(getCookie("playerVolume"),10);if(isNaN(w)||w<0||w>100){w=50;}return w;}var p;var k=new Date();function m(w){if(p){c.clearTimeout(p);p=null;}p=c.setTimeout(function(){setCookie("playerVolume",w,{expires:(new Date()).setFullYear(k.getFullYear()+1)});},25);}}function a(){var i=false;try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(j){i=true;}}catch(k){if(navigator.mimeTypes["application/x-shockwave-flash"]!==f){i=true;}}return !!i;}})(window);(function(a,c){var b=a.$;if(typeof(b)==="function"){b(function(){if(typeof(VK)!=="undefined"){var d="http://radio.romanziva.ru/";VK.init({apiId:2859319,onlyWidgets:true});VK.Widgets.Like("vk_like",{type:"mini",height:18,pageUrl:d});VK.Widgets.Comments("vk_comments",{limit:10,width:"500",attach:"*",pageUrl:d});}});}})(window);function trim(a){if(typeof(a)!=="string"){return a;}return a.replace(/^\s+|\s+$/g,"");}function getCookie(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):undefined;}function setCookie(b,f,c){c=c||{};var i=c.expires;if(typeof i==="number"&&i){var h=new Date();h.setTime(h.getTime()+i*1000);i=c.expires=h;}if(i&&i.toUTCString){c.expires=i.toUTCString();}f=encodeURIComponent(f);var a=b+"="+f;var e;for(e in c){if(c.hasOwnProperty(e)){a+="; "+e;var g=c[e];if(g!==true){a+="="+g;}}}window.document.cookie=a;}